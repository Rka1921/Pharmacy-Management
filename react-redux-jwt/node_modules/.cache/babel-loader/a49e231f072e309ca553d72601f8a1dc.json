{"ast":null,"code":"\"use strict\";\n/**\n * implements https://w3c.github.io/accname/\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst getRole_1 = __importDefault(require(\"./getRole\"));\n\nconst util_1 = require(\"./util\");\n/**\n * Small utility that handles all the JS quirks with `this` which is important\n * if no mock is provided.\n * @param element\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n */\n\n\nfunction createGetComputedStyle(element, options) {\n  const window = util_1.safeWindow(element);\n  const {\n    // This might be overengineered. I don't know what happens if I call\n    // window.getComputedStyle(elementFromAnotherWindow) or if I don't bind it\n    // the type declarations don't require a `this`\n    getComputedStyle = window.getComputedStyle.bind(window)\n  } = options;\n  return getComputedStyle;\n}\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\n\n\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n/**\n * https://w3c.github.io/aria/#namefromprohibited\n */\n\n\nfunction prohibitsNaming(node) {\n  return hasAnyConcreteRoles(node, [\"caption\", \"code\", \"deletion\", \"emphasis\", \"generic\", \"insertion\", \"paragraph\", \"presentation\", \"strong\", \"subscript\", \"superscript\"]);\n}\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\n\n\nfunction isHidden(node, options) {\n  if (!util_1.isElement(node)) {\n    return false;\n  }\n\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n\n  const style = createGetComputedStyle(node, options)(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n/**\n *\n * @param {Node} node -\n * @param {string} attributeName -\n * @returns {Element[]} -\n */\n\n\nfunction idRefs(node, attributeName) {\n  if (util_1.isElement(node) && node.hasAttribute(attributeName)) {\n    // safe due to hasAttribute check\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const ids = node.getAttribute(attributeName).split(\" \");\n    return ids // safe since it can't be null for an Element\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    .map(id => node.ownerDocument.getElementById(id)).filter(element => element !== null // TODO: why does this not narrow?\n    );\n  }\n\n  return [];\n}\n/**\n * All defined children. This include childNodes as well as owned (portaled) trees\n * via aria-owns\n * @param node\n */\n\n\nfunction queryChildNodes(node) {\n  return Array.from(node.childNodes).concat(idRefs(node, \"aria-owns\"));\n}\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\n\n\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\n\nfunction hasAbstractRole(node, role) {\n  if (!util_1.isElement(node)) {\n    return false;\n  }\n\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n\n    default:\n      throw new TypeError(`No knowledge about abstract role '${role}'. This is likely a bug :(`);\n  }\n}\n\nfunction hasAnyConcreteRoles(node, roles) {\n  if (util_1.isElement(node)) {\n    return roles.indexOf(getRole_1.default(node)) !== -1;\n  }\n\n  return false;\n}\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\n\n\nfunction querySelectorAllSubtree(element, selectors) {\n  const elements = [];\n\n  for (const root of [element, ...idRefs(element, \"aria-owns\")]) {\n    elements.push(...Array.from(root.querySelectorAll(selectors)));\n  }\n\n  return elements;\n}\n\nfunction querySelectedOptions(listbox) {\n  if (util_1.isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\n\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n/**\n * TODO\n */\n\n\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return false;\n}\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\n\n\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n/**\n * TODO\n */\n\n\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement(node) {\n  return false;\n}\n/**\n * TODO\n */\n\n\nfunction computeTooltipAttributeValue(node) {\n  return null;\n}\n\nfunction getValueOfTextbox(element) {\n  if (util_1.isHTMLInputElement(element) || util_1.isHTMLTextAreaElement(element)) {\n    return element.value;\n  } // https://github.com/eps1lon/dom-accessibility-api/issues/4\n\n\n  return element.textContent || \"\";\n}\n\nfunction getTextualContent(declaration) {\n  const content = declaration.getPropertyValue(\"content\");\n\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n\n  return \"\";\n}\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param [options]\n * @parma [options.getComputedStyle] - mock window.getComputedStyle. Needs `content`, `display` and `visibility`\n */\n\n\nfunction computeAccessibleName(root) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const consultedNodes = new Set();\n\n  if (prohibitsNaming(root)) {\n    return \"\";\n  } // 2F.i\n\n\n  function computeMiscTextAlternative(node, context) {\n    let accumulatedText = \"\";\n\n    if (util_1.isElement(node)) {\n      const pseudoBefore = createGetComputedStyle(node, options)(node, \"::before\");\n      const beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = `${beforeContent} ${accumulatedText}`;\n    }\n\n    for (const child of queryChildNodes(node)) {\n      const result = computeTextAlternative(child, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false,\n        recursion: true\n      }); // TODO: Unclear why display affects delimiter\n\n      const display = util_1.isElement(node) && createGetComputedStyle(node, options)(node).getPropertyValue(\"display\");\n      const separator = display !== \"inline\" ? \" \" : \"\";\n      accumulatedText += `${separator}${result}`;\n    }\n\n    if (util_1.isElement(node)) {\n      const pseudoAfter = createGetComputedStyle(node, options)(node, \":after\");\n      const afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = `${accumulatedText} ${afterContent}`;\n    }\n\n    return accumulatedText;\n  }\n  /**\n   * TODO: placeholder\n   */\n\n\n  function computeAttributeTextAlternative(node) {\n    if (!util_1.isElement(node)) {\n      return null;\n    }\n\n    const titleAttribute = node.getAttributeNode(\"title\");\n\n    if (titleAttribute !== null && !consultedNodes.has(titleAttribute)) {\n      consultedNodes.add(titleAttribute);\n      return titleAttribute.value;\n    }\n\n    const altAttribute = node.getAttributeNode(\"alt\");\n\n    if (altAttribute !== null && !consultedNodes.has(altAttribute)) {\n      consultedNodes.add(altAttribute);\n      return altAttribute.value;\n    }\n\n    if (util_1.isHTMLInputElement(node) && node.type === \"button\") {\n      consultedNodes.add(node);\n      return node.getAttribute(\"value\") || \"\";\n    }\n\n    return null;\n  }\n\n  function computeElementTextAlternative(node) {\n    if (!util_1.isHTMLInputElement(node)) {\n      return null;\n    }\n\n    const input = node; // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n\n    if (input.type === \"submit\") {\n      return \"Submit\";\n    }\n\n    if (input.type === \"reset\") {\n      return \"Reset\";\n    }\n\n    const {\n      labels\n    } = input; // IE11 does not implement labels, TODO: verify with caniuse instead of mdn\n\n    if (labels === null || labels === undefined || labels.length === 0) {\n      return null;\n    }\n\n    consultedNodes.add(input);\n    return Array.from(labels).map(element => {\n      return computeTextAlternative(element, {\n        isEmbeddedInLabel: true,\n        isReferenced: false,\n        recursion: true\n      });\n    }).filter(label => {\n      return label.length > 0;\n    }).join(\" \");\n  }\n\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    } // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n\n\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2A\n\n\n    if (isHidden(current, options) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2B\n\n\n    const labelElements = idRefs(current, \"aria-labelledby\");\n\n    if (!context.isReferenced && labelElements.length > 0) {\n      return labelElements.map(element => computeTextAlternative(element, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: true,\n        // thais isn't recursion as specified, otherwise we would skip\n        // `aria-label` in\n        // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n        recursion: false\n      })).join(\" \");\n    } // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n\n\n    const skipToStep2E = context.recursion && isControl(current);\n\n    if (!skipToStep2E) {\n      const ariaLabel = (util_1.isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n\n      if (ariaLabel !== \"\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      } // 2D\n\n\n      if (!isMarkedPresentational(current)) {\n        const elementTextAlternative = computeElementTextAlternative(current);\n\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n\n        const attributeTextAlternative = computeAttributeTextAlternative(current);\n\n        if (attributeTextAlternative !== null) {\n          consultedNodes.add(current);\n          return attributeTextAlternative;\n        }\n      }\n    } // 2E\n\n\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        const selectedOptions = querySelectedOptions(current);\n\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return util_1.isHTMLInputElement(current) ? current.value : \"\";\n        }\n\n        return Array.from(selectedOptions).map(selectedOption => {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // safe due to hasAttribute guard\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return current.getAttribute(\"aria-valuetext\");\n        }\n\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // safe due to hasAttribute guard\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return current.getAttribute(\"aria-valuenow\");\n        } // Otherwise, use the value as specified by a host language attribute.\n\n\n        return current.getAttribute(\"value\") || \"\";\n      }\n\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    } // 2F: https://w3c.github.io/accname/#step2F\n\n\n    if (allowsNameFromContent(current) || util_1.isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    const tooltipAttributeValue = computeTooltipAttributeValue(current);\n\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    } // TODO should this be reachable?\n\n\n    consultedNodes.add(current);\n    return \"\";\n  }\n\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    isReferenced: false,\n    recursion: false\n  }));\n}\n\nexports.computeAccessibleName = computeAccessibleName;","map":{"version":3,"mappings":";AAAA;;;;;;;;;;;;;;AAIA;;AACA;AAqBA;;;;;;;;AAMA,SAASA,sBAAT,CACCC,OADD,EAECC,OAFD,EAEiC;EAEhC,MAAMC,MAAM,GAAGC,kBAAWH,OAAX,CAAf;EACA,MAAM;IACL;IACA;IACA;IACAI,gBAAgB,GAAGF,MAAM,CAACE,gBAAP,CAAwBC,IAAxB,CAA6BH,MAA7B;EAJd,IAKFD,OALJ;EAOA,OAAOG,gBAAP;AACA;AAED;;;;;;;AAKA,SAASE,YAAT,CAAsBC,CAAtB,EAA+B;EAC9B,OAAOA,CAAC,CAACC,IAAF,GAASC,OAAT,CAAiB,QAAjB,EAA2B,GAA3B,CAAP;AACA;AAED;;;;;AAGA,SAASC,eAAT,CAAyBC,IAAzB,EAAmC;EAClC,OAAOC,mBAAmB,CAACD,IAAD,EAAO,CAChC,SADgC,EAEhC,MAFgC,EAGhC,UAHgC,EAIhC,UAJgC,EAKhC,SALgC,EAMhC,WANgC,EAOhC,WAPgC,EAQhC,cARgC,EAShC,QATgC,EAUhC,WAVgC,EAWhC,aAXgC,CAAP,CAA1B;AAaA;AAED;;;;;;;;AAMA,SAASE,QAAT,CACCF,IADD,EAECV,OAFD,EAEiC;EAEhC,IAAI,CAACE,iBAAUQ,IAAV,CAAL,EAAsB;IACrB,OAAO,KAAP;EACA;;EAED,IACCA,IAAI,CAACG,YAAL,CAAkB,QAAlB,KACAH,IAAI,CAACI,YAAL,CAAkB,aAAlB,MAAqC,MAFtC,EAGE;IACD,OAAO,IAAP;EACA;;EAED,MAAMC,KAAK,GAAGjB,sBAAsB,CAACY,IAAD,EAAOV,OAAP,CAAtB,CAAsCU,IAAtC,CAAd;EACA,OACCK,KAAK,CAACC,gBAAN,CAAuB,SAAvB,MAAsC,MAAtC,IACAD,KAAK,CAACC,gBAAN,CAAuB,YAAvB,MAAyC,QAF1C;AAIA;AAED;;;;;;;;AAMA,SAASC,MAAT,CAAgBP,IAAhB,EAA4BQ,aAA5B,EAAiD;EAChD,IAAIhB,iBAAUQ,IAAV,KAAmBA,IAAI,CAACG,YAAL,CAAkBK,aAAlB,CAAvB,EAAyD;IACxD;IACA;IACA,MAAMC,GAAG,GAAGT,IAAI,CAACI,YAAL,CAAkBI,aAAlB,EAAkCE,KAAlC,CAAwC,GAAxC,CAAZ;IAEA,OACCD,GAAG,CACF;IACA;IAFE,CAGDE,GAHF,CAGMC,EAAE,IAAIZ,IAAI,CAACa,aAAL,CAAoBC,cAApB,CAAmCF,EAAnC,CAHZ,EAIEG,MAJF,CAKG1B,OAAD,IAAiDA,OAAO,KAAK,IAL/D,CAME;IANF,CADD;EAUA;;EAED,OAAO,EAAP;AACA;AAED;;;;;;;AAKA,SAAS2B,eAAT,CAAyBhB,IAAzB,EAAmC;EAClC,OAAOiB,KAAK,CAACC,IAAN,CAAWlB,IAAI,CAACmB,UAAhB,EAA4BC,MAA5B,CAAmCb,MAAM,CAACP,IAAD,EAAO,WAAP,CAAzC,CAAP;AACA;AAED;;;;;;AAIA,SAASqB,SAAT,CAAmBrB,IAAnB,EAA6B;EAC5B,OACCC,mBAAmB,CAACD,IAAD,EAAO,CAAC,QAAD,EAAW,UAAX,EAAuB,SAAvB,EAAkC,SAAlC,CAAP,CAAnB,IACAsB,eAAe,CAACtB,IAAD,EAAO,OAAP,CAFhB;AAIA;;AAED,SAASsB,eAAT,CAAyBtB,IAAzB,EAAqCuB,IAArC,EAAiD;EAChD,IAAI,CAAC/B,iBAAUQ,IAAV,CAAL,EAAsB;IACrB,OAAO,KAAP;EACA;;EAED,QAAQuB,IAAR;IACC,KAAK,OAAL;MACC,OAAOtB,mBAAmB,CAACD,IAAD,EAAO,CAChC,OADgC,EAEhC,aAFgC,EAGhC,WAHgC,EAIhC,QAJgC,EAKhC,YALgC,CAAP,CAA1B;;IAOD;MACC,MAAM,IAAIwB,SAAJ,CACL,qCAAqCD,IAAI,4BADpC,CAAN;EAVF;AAcA;;AAED,SAAStB,mBAAT,CACCD,IADD,EAECyB,KAFD,EAE4B;EAE3B,IAAIjC,iBAAUQ,IAAV,CAAJ,EAAqB;IACpB,OAAOyB,KAAK,CAACC,OAAN,CAAcC,kBAAQ3B,IAAR,CAAd,MAAiC,CAAC,CAAzC;EACA;;EACD,OAAO,KAAP;AACA;AAED;;;;;;;AAKA,SAAS4B,uBAAT,CACCvC,OADD,EAECwC,SAFD,EAEkB;EAEjB,MAAMC,QAAQ,GAAG,EAAjB;;EAEA,KAAK,MAAMC,IAAX,IAAmB,CAAC1C,OAAD,EAAU,GAAGkB,MAAM,CAAClB,OAAD,EAAU,WAAV,CAAnB,CAAnB,EAA+D;IAC9DyC,QAAQ,CAACE,IAAT,CAAc,GAAGf,KAAK,CAACC,IAAN,CAAWa,IAAI,CAACE,gBAAL,CAAsBJ,SAAtB,CAAX,CAAjB;EACA;;EAED,OAAOC,QAAP;AACA;;AAED,SAASI,oBAAT,CAA8BC,OAA9B,EAA8C;EAC7C,IAAI3C,2BAAoB2C,OAApB,CAAJ,EAAkC;IACjC;IACA,OACCA,OAAO,CAACC,eAAR,IAA2BR,uBAAuB,CAACO,OAAD,EAAU,YAAV,CADnD;EAGA;;EACD,OAAOP,uBAAuB,CAACO,OAAD,EAAU,wBAAV,CAA9B;AACA;;AAED,SAASE,sBAAT,CAAgCrC,IAAhC,EAA0C;EACzC,OAAOC,mBAAmB,CAACD,IAAD,EAAO,CAAC,MAAD,EAAS,cAAT,CAAP,CAA1B;AACA;AAED;;;;;AAGA,SAASsC,0CAAT,CACCtC,IADD,EACW;EAEV,OAAO,KAAP;AACA;AAED;;;;;AAGA,SAASuC,qBAAT,CAA+BvC,IAA/B,EAAyC;EACxC,OAAOC,mBAAmB,CAACD,IAAD,EAAO,CAChC,QADgC,EAEhC,MAFgC,EAGhC,UAHgC,EAIhC,cAJgC,EAKhC,UALgC,EAMhC,SANgC,EAOhC,OAPgC,EAQhC,QARgC,EAShC,MATgC,EAUhC,UAVgC,EAWhC,kBAXgC,EAYhC,eAZgC,EAahC,QAbgC,EAchC,OAdgC,EAehC,KAfgC,EAgBhC,WAhBgC,EAiBhC,QAjBgC,EAkBhC,KAlBgC,EAmBhC,SAnBgC,EAoBhC,UApBgC,CAAP,CAA1B;AAsBA;AAED;;;;;AAGA,SAASwC,sDAAT,CACCxC,IADD,EACW;EAEV,OAAO,KAAP;AACA;AAED;;;;;AAGA,SAASyC,4BAAT,CAAsCzC,IAAtC,EAAgD;EAC/C,OAAO,IAAP;AACA;;AAED,SAAS0C,iBAAT,CAA2BrD,OAA3B,EAA2C;EAC1C,IAAIG,0BAAmBH,OAAnB,KAA+BG,6BAAsBH,OAAtB,CAAnC,EAAmE;IAClE,OAAOA,OAAO,CAACsD,KAAf;EACA,CAHyC,CAI1C;;;EACA,OAAOtD,OAAO,CAACuD,WAAR,IAAuB,EAA9B;AACA;;AAED,SAASC,iBAAT,CAA2BC,WAA3B,EAA2D;EAC1D,MAAMC,OAAO,GAAGD,WAAW,CAACxC,gBAAZ,CAA6B,SAA7B,CAAhB;;EACA,IAAI,eAAe0C,IAAf,CAAoBD,OAApB,CAAJ,EAAkC;IACjC,OAAOA,OAAO,CAACE,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAP;EACA;;EACD,OAAO,EAAP;AACA;AAED;;;;;;;;AAMA,SAAgBC,qBAAhB,CACCnB,IADD,EAEsC;EAAA,IAArCzC,OAAqC,uEAAF,EAAE;EAErC,MAAM6D,cAAc,GAAG,IAAIC,GAAJ,EAAvB;;EAEA,IAAIrD,eAAe,CAACgC,IAAD,CAAnB,EAA2B;IAC1B,OAAO,EAAP;EACA,CANoC,CAQrC;;;EACA,SAASsB,0BAAT,CACCrD,IADD,EAECsD,OAFD,EAE+D;IAE9D,IAAIC,eAAe,GAAG,EAAtB;;IACA,IAAI/D,iBAAUQ,IAAV,CAAJ,EAAqB;MACpB,MAAMwD,YAAY,GAAGpE,sBAAsB,CAACY,IAAD,EAAOV,OAAP,CAAtB,CACpBU,IADoB,EAEpB,UAFoB,CAArB;MAIA,MAAMyD,aAAa,GAAGZ,iBAAiB,CAACW,YAAD,CAAvC;MACAD,eAAe,GAAG,GAAGE,aAAa,IAAIF,eAAe,EAArD;IACA;;IAED,KAAK,MAAMG,KAAX,IAAoB1C,eAAe,CAAChB,IAAD,CAAnC,EAA2C;MAC1C,MAAM2D,MAAM,GAAGC,sBAAsB,CAACF,KAAD,EAAQ;QAC5CG,iBAAiB,EAAEP,OAAO,CAACO,iBADiB;QAE5CC,YAAY,EAAE,KAF8B;QAG5CC,SAAS,EAAE;MAHiC,CAAR,CAArC,CAD0C,CAM1C;;MACA,MAAMC,OAAO,GACZxE,iBAAUQ,IAAV,KACAZ,sBAAsB,CAACY,IAAD,EAAOV,OAAP,CAAtB,CAAsCU,IAAtC,EAA4CM,gBAA5C,CAA6D,SAA7D,CAFD;MAGA,MAAM2D,SAAS,GAAGD,OAAO,KAAK,QAAZ,GAAuB,GAAvB,GAA6B,EAA/C;MACAT,eAAe,IAAI,GAAGU,SAAS,GAAGN,MAAM,EAAxC;IACA;;IAED,IAAInE,iBAAUQ,IAAV,CAAJ,EAAqB;MACpB,MAAMkE,WAAW,GAAG9E,sBAAsB,CAACY,IAAD,EAAOV,OAAP,CAAtB,CAAsCU,IAAtC,EAA4C,QAA5C,CAApB;MACA,MAAMmE,YAAY,GAAGtB,iBAAiB,CAACqB,WAAD,CAAtC;MACAX,eAAe,GAAG,GAAGA,eAAe,IAAIY,YAAY,EAApD;IACA;;IAED,OAAOZ,eAAP;EACA;EAED;;;;;EAGA,SAASa,+BAAT,CAAyCpE,IAAzC,EAAmD;IAClD,IAAI,CAACR,iBAAUQ,IAAV,CAAL,EAAsB;MACrB,OAAO,IAAP;IACA;;IAED,MAAMqE,cAAc,GAAGrE,IAAI,CAACsE,gBAAL,CAAsB,OAAtB,CAAvB;;IACA,IAAID,cAAc,KAAK,IAAnB,IAA2B,CAAClB,cAAc,CAACoB,GAAf,CAAmBF,cAAnB,CAAhC,EAAoE;MACnElB,cAAc,CAACqB,GAAf,CAAmBH,cAAnB;MACA,OAAOA,cAAc,CAAC1B,KAAtB;IACA;;IAED,MAAM8B,YAAY,GAAGzE,IAAI,CAACsE,gBAAL,CAAsB,KAAtB,CAArB;;IACA,IAAIG,YAAY,KAAK,IAAjB,IAAyB,CAACtB,cAAc,CAACoB,GAAf,CAAmBE,YAAnB,CAA9B,EAAgE;MAC/DtB,cAAc,CAACqB,GAAf,CAAmBC,YAAnB;MACA,OAAOA,YAAY,CAAC9B,KAApB;IACA;;IAED,IAAInD,0BAAmBQ,IAAnB,KAA4BA,IAAI,CAAC0E,IAAL,KAAc,QAA9C,EAAwD;MACvDvB,cAAc,CAACqB,GAAf,CAAmBxE,IAAnB;MACA,OAAOA,IAAI,CAACI,YAAL,CAAkB,OAAlB,KAA8B,EAArC;IACA;;IAED,OAAO,IAAP;EACA;;EAED,SAASuE,6BAAT,CAAuC3E,IAAvC,EAAiD;IAChD,IAAI,CAACR,0BAAmBQ,IAAnB,CAAL,EAA+B;MAC9B,OAAO,IAAP;IACA;;IACD,MAAM4E,KAAK,GAAG5E,IAAd,CAJgD,CAMhD;;IACA,IAAI4E,KAAK,CAACF,IAAN,KAAe,QAAnB,EAA6B;MAC5B,OAAO,QAAP;IACA;;IACD,IAAIE,KAAK,CAACF,IAAN,KAAe,OAAnB,EAA4B;MAC3B,OAAO,OAAP;IACA;;IAED,MAAM;MAAEG;IAAF,IAAaD,KAAnB,CAdgD,CAehD;;IACA,IAAIC,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAKC,SAA9B,IAA2CD,MAAM,CAACE,MAAP,KAAkB,CAAjE,EAAoE;MACnE,OAAO,IAAP;IACA;;IAED5B,cAAc,CAACqB,GAAf,CAAmBI,KAAnB;IACA,OAAO3D,KAAK,CAACC,IAAN,CAAW2D,MAAX,EACLlE,GADK,CACDtB,OAAO,IAAG;MACd,OAAOuE,sBAAsB,CAACvE,OAAD,EAAU;QACtCwE,iBAAiB,EAAE,IADmB;QAEtCC,YAAY,EAAE,KAFwB;QAGtCC,SAAS,EAAE;MAH2B,CAAV,CAA7B;IAKA,CAPK,EAQLhD,MARK,CAQEiE,KAAK,IAAG;MACf,OAAOA,KAAK,CAACD,MAAN,GAAe,CAAtB;IACA,CAVK,EAWLE,IAXK,CAWA,GAXA,CAAP;EAYA;;EAED,SAASrB,sBAAT,CACCsB,OADD,EAEC5B,OAFD,EAME;IAED,IAAIH,cAAc,CAACoB,GAAf,CAAmBW,OAAnB,CAAJ,EAAiC;MAChC,OAAO,EAAP;IACA,CAJA,CAMD;IACA;;;IACA,IAAIjF,mBAAmB,CAACiF,OAAD,EAAU,CAAC,MAAD,CAAV,CAAvB,EAA4C;MAC3C/B,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAO,EAAP;IACA,CAXA,CAaD;;;IACA,IAAIhF,QAAQ,CAACgF,OAAD,EAAU5F,OAAV,CAAR,IAA8B,CAACgE,OAAO,CAACQ,YAA3C,EAAyD;MACxDX,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAO,EAAP;IACA,CAjBA,CAmBD;;;IACA,MAAMC,aAAa,GAAG5E,MAAM,CAAC2E,OAAD,EAAU,iBAAV,CAA5B;;IACA,IAAI,CAAC5B,OAAO,CAACQ,YAAT,IAAyBqB,aAAa,CAACJ,MAAd,GAAuB,CAApD,EAAuD;MACtD,OAAOI,aAAa,CAClBxE,GADK,CACDtB,OAAO,IACXuE,sBAAsB,CAACvE,OAAD,EAAU;QAC/BwE,iBAAiB,EAAEP,OAAO,CAACO,iBADI;QAE/BC,YAAY,EAAE,IAFiB;QAG/B;QACA;QACA;QACAC,SAAS,EAAE;MANoB,CAAV,CAFjB,EAWLkB,IAXK,CAWA,GAXA,CAAP;IAYA,CAlCA,CAoCD;IACA;IACA;;;IACA,MAAMG,YAAY,GAAG9B,OAAO,CAACS,SAAR,IAAqB1C,SAAS,CAAC6D,OAAD,CAAnD;;IACA,IAAI,CAACE,YAAL,EAAmB;MAClB,MAAMC,SAAS,GAAG,CAChB7F,iBAAU0F,OAAV,KAAsBA,OAAO,CAAC9E,YAAR,CAAqB,YAArB,CAAvB,IACA,EAFiB,EAGhBP,IAHgB,EAAlB;;MAIA,IAAIwF,SAAS,KAAK,EAAlB,EAAsB;QACrBlC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;QACA,OAAOG,SAAP;MACA,CARiB,CAUlB;;;MACA,IAAI,CAAChD,sBAAsB,CAAC6C,OAAD,CAA3B,EAAsC;QACrC,MAAMI,sBAAsB,GAAGX,6BAA6B,CAACO,OAAD,CAA5D;;QACA,IAAII,sBAAsB,KAAK,IAA/B,EAAqC;UACpCnC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;UACA,OAAOI,sBAAP;QACA;;QACD,MAAMC,wBAAwB,GAAGnB,+BAA+B,CAC/Dc,OAD+D,CAAhE;;QAGA,IAAIK,wBAAwB,KAAK,IAAjC,EAAuC;UACtCpC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;UACA,OAAOK,wBAAP;QACA;MACD;IACD,CAjEA,CAmED;;;IACA,IAAIH,YAAY,IAAI9B,OAAO,CAACO,iBAAxB,IAA6CP,OAAO,CAACQ,YAAzD,EAAuE;MACtE,IAAI7D,mBAAmB,CAACiF,OAAD,EAAU,CAAC,UAAD,EAAa,SAAb,CAAV,CAAvB,EAA2D;QAC1D/B,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;QACA,MAAM9C,eAAe,GAAGF,oBAAoB,CAACgD,OAAD,CAA5C;;QACA,IAAI9C,eAAe,CAAC2C,MAAhB,KAA2B,CAA/B,EAAkC;UACjC;UACA,OAAOvF,0BAAmB0F,OAAnB,IAA8BA,OAAO,CAACvC,KAAtC,GAA8C,EAArD;QACA;;QACD,OAAO1B,KAAK,CAACC,IAAN,CAAWkB,eAAX,EACLzB,GADK,CACD6E,cAAc,IAAG;UACrB,OAAO5B,sBAAsB,CAAC4B,cAAD,EAAiB;YAC7C3B,iBAAiB,EAAEP,OAAO,CAACO,iBADkB;YAE7CC,YAAY,EAAE,KAF+B;YAG7CC,SAAS,EAAE;UAHkC,CAAjB,CAA7B;QAKA,CAPK,EAQLkB,IARK,CAQA,GARA,CAAP;MASA;;MACD,IAAI3D,eAAe,CAAC4D,OAAD,EAAU,OAAV,CAAnB,EAAuC;QACtC/B,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;;QACA,IAAIA,OAAO,CAAC/E,YAAR,CAAqB,gBAArB,CAAJ,EAA4C;UAC3C;UACA;UACA,OAAO+E,OAAO,CAAC9E,YAAR,CAAqB,gBAArB,CAAP;QACA;;QACD,IAAI8E,OAAO,CAAC/E,YAAR,CAAqB,eAArB,CAAJ,EAA2C;UAC1C;UACA;UACA,OAAO+E,OAAO,CAAC9E,YAAR,CAAqB,eAArB,CAAP;QACA,CAXqC,CAYtC;;;QACA,OAAO8E,OAAO,CAAC9E,YAAR,CAAqB,OAArB,KAAiC,EAAxC;MACA;;MACD,IAAIH,mBAAmB,CAACiF,OAAD,EAAU,CAAC,SAAD,CAAV,CAAvB,EAA+C;QAC9C/B,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;QACA,OAAOxC,iBAAiB,CAACwC,OAAD,CAAxB;MACA;IACD,CAzGA,CA2GD;;;IACA,IACC3C,qBAAqB,CAAC2C,OAAD,CAArB,IACC1F,iBAAU0F,OAAV,KAAsB5B,OAAO,CAACQ,YAD/B,IAEAxB,0CAA0C,CAAC4C,OAAD,CAF1C,IAGA1C,sDAAsD,CAAC0C,OAAD,CAJvD,EAKE;MACD/B,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAO7B,0BAA0B,CAAC6B,OAAD,EAAU;QAC1CrB,iBAAiB,EAAEP,OAAO,CAACO,iBADe;QAE1CC,YAAY,EAAE;MAF4B,CAAV,CAAjC;IAIA;;IAED,IAAIoB,OAAO,CAACO,QAAR,KAAqBP,OAAO,CAACQ,SAAjC,EAA4C;MAC3CvC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAOA,OAAO,CAACtC,WAAR,IAAuB,EAA9B;IACA;;IAED,IAAIU,OAAO,CAACS,SAAZ,EAAuB;MACtBZ,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAO7B,0BAA0B,CAAC6B,OAAD,EAAU;QAC1CrB,iBAAiB,EAAEP,OAAO,CAACO,iBADe;QAE1CC,YAAY,EAAE;MAF4B,CAAV,CAAjC;IAIA;;IAED,MAAM6B,qBAAqB,GAAGlD,4BAA4B,CAACyC,OAAD,CAA1D;;IACA,IAAIS,qBAAqB,KAAK,IAA9B,EAAoC;MACnCxC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;MACA,OAAOS,qBAAP;IACA,CA1IA,CA4ID;;;IACAxC,cAAc,CAACqB,GAAf,CAAmBU,OAAnB;IACA,OAAO,EAAP;EACA;;EAED,OAAOvF,YAAY,CAClBiE,sBAAsB,CAAC7B,IAAD,EAAO;IAC5B8B,iBAAiB,EAAE,KADS;IAE5BC,YAAY,EAAE,KAFc;IAG5BC,SAAS,EAAE;EAHiB,CAAP,CADJ,CAAnB;AAOA;;AA7QD6B","names":["createGetComputedStyle","element","options","window","util_1","getComputedStyle","bind","asFlatString","s","trim","replace","prohibitsNaming","node","hasAnyConcreteRoles","isHidden","hasAttribute","getAttribute","style","getPropertyValue","idRefs","attributeName","ids","split","map","id","ownerDocument","getElementById","filter","queryChildNodes","Array","from","childNodes","concat","isControl","hasAbstractRole","role","TypeError","roles","indexOf","getRole_1","querySelectorAllSubtree","selectors","elements","root","push","querySelectorAll","querySelectedOptions","listbox","selectedOptions","isMarkedPresentational","isNativeHostLanguageTextAlternativeElement","allowsNameFromContent","isDescendantOfNativeHostLanguageTextAlternativeElement","computeTooltipAttributeValue","getValueOfTextbox","value","textContent","getTextualContent","declaration","content","test","slice","computeAccessibleName","consultedNodes","Set","computeMiscTextAlternative","context","accumulatedText","pseudoBefore","beforeContent","child","result","computeTextAlternative","isEmbeddedInLabel","isReferenced","recursion","display","separator","pseudoAfter","afterContent","computeAttributeTextAlternative","titleAttribute","getAttributeNode","has","add","altAttribute","type","computeElementTextAlternative","input","labels","undefined","length","label","join","current","labelElements","skipToStep2E","ariaLabel","elementTextAlternative","attributeTextAlternative","selectedOption","nodeType","TEXT_NODE","tooltipAttributeValue","exports"],"sourceRoot":"","sources":["../sources/accessible-name.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}